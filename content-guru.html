<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mapelku Guru</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="bg-white min-h-screen font-sans text-gray-800">
    <!-- Menu Hamburger (Mobile) -->
    <div id="menuPanel"
      class="fixed top-0 left-0 h-full w-64 bg-white shadow-lg transform -translate-x-full transition-transform duration-300 z-50">
      <div class="flex justify-between items-center p-4 border-b">
        <img src="logo.png" alt="Logo" class="w-10 h-10 object-contain" />
        <button id="closeMenu" class="text-gray-600 text-2xl">&times;</button>
      </div>
      <nav class="flex flex-col p-4 space-y-4 text-gray-700 font-medium">
        <a href="#" class="hover:text-blue-600" id="">Beranda</a>
        <a href="#" class="hover:text-blue-600">Mapel ku</a>
      </nav>
    </div>

    <!-- Konten Utama -->
    <main class="max-w-7xl mx-auto px-4 py-10 flex flex-col md:flex-row gap-6">
      <!-- Bagian Mapel -->
      <section class="flex-1">

       <div class="flex">
         <main class="flex-1 px-12 py-8">
           <h1 class="text-xl font-semibold mb-6">Selamat Datang, <span class="italic">"username"</span></h1>
     
           <section class="mb-10">
              <div class="max-w-2xl mx-auto bg-white p-6 rounded shadow">
              <h2 class="text-lg font-semibold mb-2">Lini Masa</h2>
              <div class="flex items-center gap-3 mb-4">
                <input type="text" id="searchInput" placeholder="cari" class="border px-4 py-2 rounded w-1/3" />
                <select id="sortSelect" class="border px-4 py-2 rounded">
                  <option value="asc">Urutkan berdasarkan tanggal (lama ke baru)</option>
                  <option value="desc">Urutkan berdasarkan tanggal (baru ke lama)</option>
                </select>
              </div>
            
              <div id="timeline" class="space-y-3">
                <!-- Kegiatan akan muncul di sini -->
              </div>
           </section>

           <section> 
              <div class="max-w-md mx-auto bg-white p-4 rounded shadow">
                <div class="flex justify-between items-center mb-4">
                  <button id="prev" class="px-2 py-1 bg-purple-600 text-white rounded">Prev</button>
                  <h2 id="monthYear" class="text-lg font-bold"></h2>
                  <button id="next" class="px-2 py-1 bg-purple-600 text-white rounded">Next</button>
                </div>
                <div class="grid grid-cols-7 gap-2 text-center font-bold">
                  <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
                </div>
                <div id="calendar" class="grid grid-cols-7 gap-2 mt-2"></div>
              </div>
            </section>
          </main>
        </div>
        
      </section>

      <!-- Notifikasi Desktop -->
      <aside class="hidden md:block w-72 bg-white border border-gray-300 rounded-xl p-4 shadow-sm">
        <h3 class="font-semibold mb-3 flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none"
            viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M15 19l-7-7 7-7" />
          </svg>
          Notifikasi
        </h3>
        <ul class="space-y-2 text-sm">
          <li class="text-blue-600 font-medium">ðŸ”¹ Unread Notification</li>
          <li>â€¢ Notification</li>
          <li>â€¢ Notification</li>
          <li>â€¢ Notification</li>
        </ul>
      </aside>
    </main>

    <!-- Tombol Buka Notifikasi (Mobile) -->
    <button id="notifBtn"
      class="fixed bottom-6 right-6 md:hidden bg-gray-200 border-2 border-blue-500 text-black rounded-full w-12 h-12 flex items-center justify-center shadow-md">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none"
        viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M15 19l-7-7 7-7" />
      </svg>
    </button>

    <!-- Panel Notifikasi (Mobile) -->
    <div id="notifPanel"
      class="fixed top-0 right-0 h-full w-64 bg-white shadow-lg border-l border-gray-200 transform translate-x-full transition-transform duration-300 md:hidden z-50">
      <div class="flex justify-between items-center p-4 border-b">
        <h3 class="font-semibold">Notifikasi</h3>
        <button id="closeNotif" class="text-gray-600 text-2xl">&times;</button>
      </div>
      <ul class="p-4 space-y-2 text-sm">
        <li class="text-blue-600 font-medium">ðŸ”¹ Unread Notification</li>
        <li>â€¢ Notification</li>
        <li>â€¢ Notification</li>
        <li>â€¢ Notification</li>
      </ul>
    </div>

    <!-- SCRIPT -->
    <script>

      function isActivityDate(year, month, day) {
      const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
      return activities.some(activity => activity.date === dateStr);
    }

      
        const activities = [
        { date: '2025-11-10', name: 'Absensi', url: 'daftar-hadir.php'},
        { date: '2025-11-11', name: 'Batas Pengumpulan Tugas - "NAMA MAPEL"', url: 'NAMA-MAPEL.php'},
        { date: '2025-11-13', name: 'Absensi', url: 'daftar-hadir.php'},
      ];
      
      const timeline = document.getElementById('timeline');
      const searchInput = document.getElementById('searchInput');
      const sortSelect = document.getElementById('sortSelect');
      
      function renderTimeline(data) {
        timeline.innerHTML = '';
        if (data.length === 0) {
          timeline.innerHTML = `<div class="border h-24 flex items-center justify-center text-gray-400">tidak ada aktifitas</div>`;
          return;
        }
      
        data.forEach(item => {
          timeline.innerHTML += `
            <a href="${item.url}">
              <div class="border p-3 rounded bg-gray-50">
                <div class="text-sm text-gray-500">${item.date}</div>
                <div class="font-medium">${item.name}</div>
              </div>
            </a>
          `;
        });
      }
    
      function filterAndSort() {
        const keyword = searchInput.value.toLowerCase();
        const sortOrder = sortSelect.value;
      
        let filtered = activities.filter(item =>
          item.name.toLowerCase().includes(keyword)
        );
      
        filtered.sort((a, b) => {
          return sortOrder === 'asc'
            ? new Date(a.date) - new Date(b.date)
            : new Date(b.date) - new Date(a.date);
        });
      
        renderTimeline(filtered);
      }
    
      searchInput.addEventListener('input', filterAndSort);
      sortSelect.addEventListener('change', filterAndSort);
    
      // Initial render
      renderTimeline(activities);
    
      const calendar = document.getElementById("calendar");
      const monthYear = document.getElementById("monthYear");
      let currentDate = new Date();

      function renderCalendar(date) {
        calendar.innerHTML = "";
        const year = date.getFullYear();
        const month = date.getMonth();
        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();
      
        monthYear.textContent = date.toLocaleString("default", { month: "long", year: "numeric" });
      
        for (let i = 0; i < firstDay; i++) {
          calendar.innerHTML += `<div></div>`;
        }
      
        for (let day = 1; day <= daysInMonth; day++) {
          const isToday = day === new Date().getDate() && month === new Date().getMonth() && year === new Date().getFullYear();
          const isMarked = isActivityDate(year, month, day);
        
          calendar.innerHTML += `
            <div class="p-2 border rounded text-center relative ${isToday ? 'bg-blue-200 font-bold' : ''}">
              <span class="${isMarked ? 'border-2 border-red-500 rounded-full px-2 py-1 inline-block' : ''}">
                ${day}
              </span>
            </div>
          `;
        }

      }

      document.getElementById("prev").addEventListener("click", () => {
        currentDate.setMonth(currentDate.getMonth() - 1);
        renderCalendar(currentDate);
      });
      
      document.getElementById("next").addEventListener("click", () => {
        currentDate.setMonth(currentDate.getMonth() + 1);
        renderCalendar(currentDate);
      });
      
      renderCalendar(currentDate);
      

      // Notifikasi (mobile)
      const notifBtn = document.getElementById("notifBtn");
      const notifPanel = document.getElementById("notifPanel");
      const closeNotif = document.getElementById("closeNotif");

      notifBtn.addEventListener("click", () => {
        notifPanel.classList.toggle("translate-x-full");
      });
      closeNotif.addEventListener("click", () => {
        notifPanel.classList.add("translate-x-full");
      });

      // Menu Hamburger (mobile)
      const menuBtn = document.getElementById("menuBtn");
      const menuPanel = document.getElementById("menuPanel");
      const closeMenu = document.getElementById("closeMenu");

      menuBtn.addEventListener("click", () => {
        menuPanel.classList.remove("-translate-x-full");
      });
      closeMenu.addEventListener("click", () => {
        menuPanel.classList.add("-translate-x-full");
      });
    </script>
  </body>
</html>
